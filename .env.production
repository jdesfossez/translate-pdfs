# Production Configuration for PDF Translation Service
# Copy this file to .env and customize for your environment

# Application Settings
PDF_TRANSLATE_DEBUG=false
PDF_TRANSLATE_HOST=0.0.0.0
PDF_TRANSLATE_PORT=8000
PDF_TRANSLATE_LOG_LEVEL=INFO

# Redis Configuration
PDF_TRANSLATE_REDIS_URL=redis://redis:6379/0
PDF_TRANSLATE_QUEUE_NAME=pdf_translation

# Database Configuration
PDF_TRANSLATE_DATABASE_URL=sqlite:///./data/jobs.db

# File Handling
PDF_TRANSLATE_MAX_FILE_SIZE=104857600  # 100MB in bytes
PDF_TRANSLATE_CLEANUP_AFTER_HOURS=168  # 7 days

# Translation Model Configuration
PDF_TRANSLATE_MODEL_NAME=facebook/nllb-200-3.3B
PDF_TRANSLATE_MODEL_REVISION=refs/pr/17
PDF_TRANSLATE_USE_SAFETENSORS=true
PDF_TRANSLATE_CPU_LOAD_THEN_GPU=true
PDF_TRANSLATE_MAX_TOKENS_PER_BATCH=64000

# OCR Configuration
PDF_TRANSLATE_OCR_LANGUAGE=eng+fra

# Translation Languages
PDF_TRANSLATE_SOURCE_LANGUAGE=auto
PDF_TRANSLATE_TARGET_LANGUAGE=fr_XX

# GPU Configuration (for Docker environments)
NVIDIA_VISIBLE_DEVICES=all
NVIDIA_DRIVER_CAPABILITIES=compute,utility

# Security Settings
PDF_TRANSLATE_RATE_LIMIT_REQUESTS=5
PDF_TRANSLATE_RATE_LIMIT_WINDOW=300  # 5 minutes

# Performance Settings
PDF_TRANSLATE_MAX_CONCURRENT_JOBS=3
PDF_TRANSLATE_WORKER_TIMEOUT=14400  # 4 hours
PDF_TRANSLATE_MAX_INPUT_TOKENS=950
PDF_TRANSLATE_MAX_NEW_TOKENS=400
PDF_TRANSLATE_BATCH_SIZE=48
